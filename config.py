# config.py - КОНФИГУРАЦИЯ ГИБРИДНОГО БОТА

import os
from dotenv import load_dotenv

load_dotenv()

# ============================================================================
# TWITCH КОНФИГУРАЦИЯ
# ============================================================================

TWITCH_TOKEN = os.getenv("TWITCH_TOKEN")
TWITCH_NICK = os.getenv("TWITCH_NICK")
TWITCH_CHANNEL = os.getenv("TWITCH_CHANNEL", "channel1,channel2")

if not TWITCH_TOKEN or not TWITCH_NICK:
    raise ValueError("❌ Ошибка: TWITCH_TOKEN и TWITCH_NICK должны быть в .env!")

# ============================================================================
# AI API КОНФИГУРАЦИЯ (ГИБРИДНАЯ СИСТЕМА)
# ============================================================================

# Google AI Studio - для анализа контекста (Gemma-3-27B)
GOOGLE_AI_KEY = os.getenv("GOOGLE_AI_KEY")
if not GOOGLE_AI_KEY:
    raise ValueError("❌ Ошибка: GOOGLE_AI_KEY должен быть в .env!")

# Mistral - для генерации ответов (используем более мощную модель)
MISTRAL_API_KEY = os.getenv("MISTRAL_API_KEY")
if not MISTRAL_API_KEY:
    raise ValueError("❌ Ошибка: MISTRAL_API_KEY должен быть в .env!")

# ============================================================================
# ПАРАМЕТРЫ ОТВЕТОВ
# ============================================================================

# Без упоминания - максимум 180 символов (краткий ответ)
MAX_RESPONSE_LENGTH = 180

# С упоминанием - максимум 600 символов (раскрытие)
MAX_RESPONSE_LENGTH_MENTIONED = 600

# Вероятность отвечать на сообщение (без упоминания)
RESPONSE_PROBABILITY = 0.07

# ============================================================================
# КОНТЕКСТ И ТОКЕНЫ
# ============================================================================

# Максимум сообщений в контексте (релевантные)
CONTEXT_MESSAGE_LIMIT = 15

# Лимиты токенов (общие для обеих моделей)
TOKEN_LIMIT_PER_MINUTE = 500000
TOKEN_LIMIT_PER_DAY = 1000000

# Повторные попытки при ошибке
RETRY_MAX_ATTEMPTS = 3

# ============================================================================
# СМАЙЛИКИ - ИСПОЛЬЗУЕМ ДИНАМИЧЕСКИЙ ПУЛ ИЗ КАНАЛА
# ============================================================================

# Если смайлики не загружены из канала - используем эти по умолчанию
DEFAULT_EMOTES = [
    "pog", "PogU", "Pog", "catjam", "CATJAM", "poggers", "yay",
    "KEKW", "kekw", "OMEGALUL", "omegalul", "LUL", "lul",
    "sadge", "SADGE", "BibleThump", "rip", "RIP",
    "confused", "Confused", "??", "huh", "HUH",
]

# ============================================================================
# ПАРАМЕТРЫ НАСТРОЕНИЯ И ЭНЕРГИИ
# ============================================================================

MOOD_STATES = ["happy", "neutral", "tired", "excited", "curious", "sarcastic", "playful", "flirty"]

TOPIC_CHANGE_KEYWORDS = [
    "кстати",
    "кстати говоря",
    "но",
    "однако",
    "слушай",
    "ладно",
    "по-другому",
    "вообще",
]

# ============================================================================
# ПАРАМЕТРЫ ПОВЕДЕНИЯ
# ============================================================================

MIN_USER_RESPONSE_DELAY = 10
MAX_RESPONSES_PER_MINUTE = 5

# ============================================================================
# DATABASE
# ============================================================================

DATABASE_PATH = "bot_data.db"

# ============================================================================
# ЛОГИРОВАНИЕ
# ============================================================================

LOG_LEVEL = "INFO"
LOG_FILE = "bot.log"
